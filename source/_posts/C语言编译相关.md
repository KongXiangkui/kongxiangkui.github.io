---
title: C语言编译相关
date: 2020-04-15 22:47:01
tags:
- C
categories:
- C
toc: true
---
本文介绍C语音的开发环境。
<!-- more -->
## C开发工具链

- 预处理指令
- 编译器
- 多文件编译(make, cmake)

## C预处理器
> 预处理命令属于C语言编译器，不是C语言的组成部分  

预处理功能：

- 将原文件中以“include”格式包含的文件复制到编译的源文件中
- 用实际值替换#define定义的字符串
- 根据#if后面的条件决定需要编译的代码

预处理器的输入：C源程序

预处理器的输出：源代码的另一个版本，不再包含指令，输出直接交给编译器

预处理指令：

- 宏定义
- 文件包含
- 条件编译
- 其他如#error, # line,#pragma等

注意：
1. 预处理指令以第一个换行符为结束，除非明确指出要继续
2. #define带参数（形式参数）的宏，宏名和参数之间不能有空格
3. #define定义宏时，可以用操作符#在字符串中输出实参；使用操作符##将宏中的两个部分连接成一个内容
4. #include以<>括起文件名，编译程序将到C开发环境中呢设置好的include文件中找指定文件；对于自己编写的文件，使用””括起来，如果文件不是存放在当前工作文件夹，可以加路径

预定义的宏名：

_DATE_：当前源程序创建的日期
_TIME_：当前源程序的创建时间
_FILE_：当前源程序的文件名（包括盘符和路径）
_LINE_：当前被编译代码的行号
_STDC_：返回i编译器是否是标准C，1为符合标准C，否则为不符合

## C Compiler

MinGW--64
- Architecture：x86_64，i686
- Tread：win32，posix（跨平台）
- Exception handle models
SJLJ（setjmp/longjmp）：可用于32位和64位，即使不抛出异常也会造成一定性能损失
DWARF（DW2，dwarf-2）：仅32位可用，没有永久的运行时间开销，需要整个调用堆栈启用，这意味着execption不能被抛出，如Windows的DLL
结构化exception处理SEH（Windows）：零开销execption，可用于64位

## C 多文件编译


